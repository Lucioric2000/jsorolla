<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Circos Browser</title>
    <!-- Core libs -->
    <script type="text/javascript" src="../../core/utilsNew.js"></script>
    <script type="text/javascript" src="../../core/svg.js"></script>
    <script type="text/javascript" src="../../core/cellbase-manager.js"></script>
    <!-- Test data -->
    <script type="text/javascript" src="./hsapiens.js"></script>
    <!-- Circos module -->
    <script type="text/javascript" src="../circos-utils.js"></script>
    <script type="text/javascript" src="../circos-browser.js"></script>
    <script type="text/javascript" src="../circos-layout.js"></script>
    <!-- Circos Tracks -->
    <script type="text/javascript" src="../tracks/track.js"></script>
    <script type="text/javascript" src="../tracks/karyotype.js"></script>
    <script type="text/javascript" src="../tracks/histogram.js"></script>
    <script type="text/javascript" src="../tracks/chords.js"></script>
    <!-- Circos renderers -->
    <script type="text/javascript" src="../renderers/renderer.js"></script>
    <script type="text/javascript" src="../renderers/karyotype.js"></script>
    <script type="text/javascript" src="../renderers/histogram.js"></script>
    <script type="text/javascript" src="../renderers/chords.js"></script>
    <!-- Test scripts -->
    <script type="text/javascript" src="../circos-test.js"></script>
</head>
<body>
    <h2>Circos Browser</h2>
    <div id="circos" align="center"></div>
    <script type="text/javascript">
        let chromosomesData = hsapiens.response[0].result[0].chromosomes;
        CircosUtils.sortChromosomes(chromosomesData);
        //console.log(chromosomesData);
        //Karyotype track configuration
        let karyotypeTrack = {
            "args": {
                "data": chromosomesData
            },
            "config": {
                "size": 15,
                "rank": 1
            }
        };
        //Histogram track configuration
        let histogramTrack = {
            "args": {
                "data": CircosTest.buildHistogramData(chromosomesData)
            },
            "config": {
                "size": 30,
                "rank": 2
            }
        };
        //Chords track configuration
        let chordsTrack = {
            "args": {
                "data": CircosTest.buildChordsData(chromosomesData)
            },
            "config": {
                "size": 130,
                "rank": 0
            }
        };
        //Build circos
        let circos = new CircosBrowser(document.getElementById("circos"), {
            "tracks": {
                "karyotype": new CircosKaryotypeTrack(karyotypeTrack.args, karyotypeTrack.config),
                "histogram": new CircosHistogramTrack(histogramTrack.args, histogramTrack.config),
                "chords": new CircosChordsTrack(chordsTrack.args, chordsTrack.config)
            },
            "layout": {
                "data": chromosomesData
            },
            "trackOffset": 0
        });
        //Draw the circos
        circos.draw();
    </script>
</body>

